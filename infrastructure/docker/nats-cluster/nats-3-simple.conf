# NATS服务器配置 - 节点3 (简化版)
server_name: "nats-3"

# 客户端连接配置
listen: 0.0.0.0:4222
max_connections: 65536
max_control_line: 4KB
max_payload: 1MB
max_pending: 67108864

# HTTP监控端口
http: 0.0.0.0:8222

# JetStream配置
jetstream {
    store_dir: "/data/jetstream"
    max_memory_store: 2GB
    max_file_store: 20GB
}

# 集群配置
cluster {
    name: "agent-cluster"
    listen: 0.0.0.0:6222
    
    routes: [
        "nats://nats-1:6222"
        "nats://nats-2:6222"
    ]
}

# 服务器标签
server_tags: [
    "cluster:agent-cluster",
    "region:local", 
    "az:az-3"
]

# 日志配置
log_file: "/var/log/nats/nats-server.log"
logtime: true
debug: false
trace: false

# 连接限制
write_deadline: "10s"
ping_interval: "2m"
ping_max: 2