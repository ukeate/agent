# Playwright MCP 功能验证检查清单集合

## 📋 使用说明

**目标**: 确保每个功能模块经过真实用户场景验证
**工具**: Playwright MCP (Model Control Protocol)
**原则**: 每个功能修复后必须通过人工验证才能标记为完成
**频率**: 功能修复后立即执行，每日快速验证，发布前完整验证

---

## 🎭 清单 1: 单代理对话系统验证

### 基础信息
- **模块名称**: 单代理对话 (Chat)
- **测试地址**: http://localhost:3000/chat  
- **对应后端**: /api/v1/agent/chat
- **关键组件**: MessageInput, MessageList, ConversationContainer
- **验证时长**: 15-20分钟

### 🔍 详细验证步骤

#### Step 1: 页面访问和加载
```
□ 使用Playwright MCP打开 http://localhost:3000/chat
□ 页面在3秒内完全加载
□ 检查浏览器控制台无JavaScript错误
□ 验证页面标题显示为 "单代理对话" 或相关文字
□ 确认左侧导航菜单高亮当前页面
□ 检查页面布局完整，无明显样式问题
```

**验证标准**: 
- 页面加载时间 < 3秒
- 无404、500等HTTP错误
- 控制台无red error信息

#### Step 2: UI组件交互验证  
```
□ 定位消息输入框，验证placeholder文字显示
□ 点击输入框，确认可以获得焦点
□ 输入测试文字: "这是UI交互测试"
□ 验证字符计数器显示 (如: 8/2000)
□ 确认发送按钮从禁用状态变为可用状态
□ 清空输入框，确认发送按钮重新禁用
□ 测试Enter键发送功能
□ 测试Shift+Enter换行功能
```

**验证标准**:
- 输入框响应灵敏无延迟
- 按钮状态切换正确
- 键盘快捷键功能正常

#### Step 3: 核心聊天功能验证
```
□ 输入第一条消息: "你好，这是功能测试消息"
□ 点击发送按钮或按Enter键
□ 验证消息立即出现在聊天区域
□ 等待AI回复，记录响应时间
□ 验证AI回复格式正确显示
□ 检查消息时间戳是否显示
□ 验证消息发送者标识正确 (用户/AI)
```

**验证标准**:
- 消息发送响应时间 < 1秒
- AI回复响应时间 < 10秒  
- 消息格式和布局正确

#### Step 4: 连续对话和上下文验证
```
□ 发送第二条消息: "请记住我刚才说了什么"
□ 验证AI回复显示记忆上下文
□ 发送第三条消息: "总结我们的对话"
□ 验证AI能够引用之前的对话内容
□ 测试长消息发送 (>100字符)
□ 测试特殊字符消息: "测试@#$%^&*()符号"
□ 测试Markdown格式消息: "**加粗** 和 `代码`"
```

**验证标准**:
- 上下文记忆功能正常
- 长消息正确显示
- 特殊字符不引起错误
- Markdown渲染正确

#### Step 5: 历史记录和会话管理
```
□ 点击"新建对话"按钮
□ 验证聊天历史被清空
□ 验证开始新的对话会话
□ 发送测试消息验证新会话工作正常
□ 检查是否有历史记录功能入口
□ 如有历史功能，测试历史记录查看
□ 如有清空功能，测试清空聊天历史
```

**验证标准**:
- 会话切换功能正常
- 历史记录保存和查看正常
- 清空功能工作正确

#### Step 6: 错误处理和边界条件
```
□ 测试空消息发送 (应该被阻止)
□ 测试超长消息 (>2000字符)
□ 断开网络连接，测试离线状态处理
□ 重新连接网络，验证自动恢复
□ 测试后端服务异常时的错误提示
□ 验证错误消息的用户友好性
```

**验证标准**:
- 边界条件处理正确
- 错误提示清晰友好
- 网络异常恢复正常

#### Step 7: 响应式设计验证
```
□ 切换到移动端视图 (375px宽度)
□ 验证聊天界面在小屏幕上正常显示
□ 测试移动端输入和发送功能
□ 切换到平板视图 (768px宽度)  
□ 验证中等屏幕适配正常
□ 切换回桌面视图 (>1200px)
□ 验证大屏幕布局合理利用空间
```

**验证标准**:
- 各种屏幕尺寸下功能正常
- 布局适配合理美观
- 移动端可用性良好

#### Step 8: 性能和体验验证
```
□ 发送10条消息，观察页面性能
□ 检查内存使用是否异常增长
□ 测试长时间页面停留后的功能
□ 验证页面刷新后的状态恢复
□ 测试快速连续发送消息的处理
□ 验证加载状态和等待体验
```

**验证标准**:
- 长时间使用无性能问题
- 刷新后状态正确恢复
- 加载状态提示清晰

### 🏆 验收标准总结

**必须通过项目** (任一失败则不通过):
- ✅ 基础页面加载和导航
- ✅ 消息输入和发送功能
- ✅ AI回复接收和显示
- ✅ 基本错误处理
- ✅ 移动端基础可用性

**重要项目** (影响用户体验):
- ⭐ 上下文记忆功能
- ⭐ 历史记录管理
- ⭐ 响应式设计完整性
- ⭐ 性能和稳定性
- ⭐ 错误提示友好性

---

## 🤖 清单 2: 多代理协作系统验证

### 基础信息  
- **模块名称**: 多代理协作 (Multi-Agent)
- **测试地址**: http://localhost:3000/multi-agent
- **对应后端**: /api/v1/multi-agent/
- **关键组件**: MultiAgentChatContainer, SessionControls, AgentAvatar
- **验证时长**: 20-25分钟

### 🔍 详细验证步骤

#### Step 1: 页面基础功能验证
```
□ 使用Playwright MCP打开多代理协作页面
□ 验证页面完整加载，无白屏或错误
□ 检查多代理界面布局正确
□ 确认代理头像和状态显示区域存在
□ 验证会话控制面板可见
□ 检查消息显示区域正确渲染
□ 确认输入区域和发送控件正常
```

#### Step 2: 多代理会话创建
```
□ 点击"开始新的多代理会话"按钮
□ 观察代理初始化过程
□ 验证多个代理状态显示为"就绪"
□ 确认会话ID或标识符生成
□ 检查代理列表显示正确
□ 验证初始状态消息显示
```

#### Step 3: 协作对话测试
```
□ 发送协作任务消息: "请帮我设计一个简单的网站首页"
□ 观察第一个代理的响应
□ 验证代理身份标识清晰显示
□ 等待第二个代理的协作响应  
□ 检查代理间是否有消息传递标识
□ 验证对话流程的逻辑性
□ 观察代理切换的视觉效果
```

#### Step 4: 会话控制功能验证
```
□ 测试"暂停会话"功能
□ 验证暂停状态下代理停止响应
□ 测试"恢复会话"功能
□ 验证恢复后代理可以继续协作
□ 测试"停止会话"功能
□ 验证停止后会话状态正确显示
□ 测试"重新开始会话"功能
```

#### Step 5: 代理状态监控
```
□ 观察代理状态实时更新
□ 验证"思考中"状态显示
□ 验证"响应中"状态显示  
□ 验证"等待中"状态显示
□ 检查代理负载或忙碌指示
□ 验证代理异常状态的处理
```

#### Step 6: 历史记录和会话管理
```
□ 验证多代理对话历史保存
□ 测试会话历史查看功能
□ 验证不同代理消息的区分显示
□ 测试会话导出或分享功能(如有)
□ 验证多个会话间的切换(如有)
```

### 🏆 多代理验收标准
- ✅ 多代理会话可以正常创建和启动
- ✅ 代理间协作对话逻辑正确
- ✅ 会话控制(暂停/恢复/停止)功能正常
- ✅ 代理状态监控和显示准确
- ✅ 错误处理和异常恢复机制有效

---

## 🔍 清单 3: RAG检索系统验证

### 基础信息
- **模块名称**: RAG检索 (RAG Search)  
- **测试地址**: http://localhost:3000/rag
- **对应后端**: /api/v1/rag/
- **关键组件**: RagQueryPanel, RagResultsList, RagIndexStatus
- **验证时长**: 25-30分钟

### 🔍 详细验证步骤

#### Step 1: RAG界面基础验证
```
□ 访问RAG检索页面
□ 验证页面标题和导航正确
□ 检查搜索输入框正常显示
□ 验证搜索按钮状态正确
□ 确认索引状态面板显示
□ 检查结果显示区域存在
□ 验证高级选项面板可展开
```

#### Step 2: 基础搜索功能验证
```
□ 在搜索框输入: "AI代理系统"
□ 点击搜索按钮
□ 验证搜索请求发送成功
□ 等待搜索结果返回 (< 5秒)
□ 检查结果列表格式正确
□ 验证相关性评分显示
□ 检查结果片段内容合理
□ 验证结果来源信息准确
```

#### Step 3: 高级搜索语法验证
```
□ 测试AND操作符: "AI AND 代理"
□ 验证AND搜索结果正确
□ 测试OR操作符: "AI OR 机器学习"  
□ 验证OR搜索结果正确
□ 测试精确短语: "人工智能代理"
□ 验证精确短语匹配结果
□ 测试字段搜索: title:代理
□ 验证字段限定搜索结果
```

#### Step 4: 搜索结果交互验证
```
□ 点击搜索结果项查看详情
□ 验证详情页面或弹窗显示
□ 测试结果分页功能(如有)
□ 验证结果排序选项(如有)
□ 测试结果过滤功能(如有)
□ 验证搜索结果的复制或分享功能
```

#### Step 5: 文档管理功能验证
```
□ 测试文档上传功能
□ 选择测试文档进行上传
□ 验证上传进度显示
□ 确认上传成功反馈
□ 验证索引自动更新
□ 测试上传后搜索新内容
□ 验证文档删除功能(如有)
```

#### Step 6: 索引状态和系统信息
```
□ 检查向量数据库连接状态
□ 验证文档数量统计准确
□ 检查索引大小信息显示
□ 验证最后更新时间显示
□ 测试索引重建功能
□ 验证健康检查状态显示
□ 测试索引重置功能(谨慎操作)
```

#### Step 7: 搜索历史和优化
```
□ 验证搜索历史记录保存
□ 测试历史查询重新执行
□ 检查搜索建议或自动完成
□ 验证热门搜索词显示(如有)
□ 测试搜索词纠错功能(如有)
□ 验证相关搜索推荐功能
```

### 🏆 RAG验收标准
- ✅ 基础搜索功能完全可用
- ✅ 高级搜索语法支持正常
- ✅ 搜索结果质量和相关性合理
- ✅ 文档上传和索引管理功能正常
- ✅ 系统状态监控和错误处理完善

---

## 👑 清单 4: 监督者模式验证

### 基础信息
- **模块名称**: 监督者模式 (Supervisor)
- **测试地址**: http://localhost:3000/supervisor  
- **对应后端**: /api/v1/supervisor/
- **关键组件**: SupervisorDashboard, TaskList, AgentMetrics
- **验证时长**: 20-25分钟

### 🔍 详细验证步骤

#### Step 1: 监督者仪表板验证
```
□ 访问监督者模式页面
□ 验证仪表板完整加载
□ 检查系统概览指标显示
□ 验证代理状态监控面板
□ 确认任务队列显示区域
□ 检查决策历史面板存在
□ 验证系统配置区域可访问
```

#### Step 2: 任务管理功能验证
```
□ 点击"提交新任务"按钮
□ 填写任务表单: "分析市场趋势报告"
□ 选择任务优先级和类型
□ 提交任务到监督者系统
□ 验证任务出现在任务列表
□ 观察任务分配给合适的代理
□ 验证任务状态实时更新
```

#### Step 3: 代理监控和协调
```
□ 检查代理性能指标显示
□ 验证代理负载分布信息
□ 观察代理工作状态变化
□ 测试代理重启或重置功能
□ 验证代理异常检测机制
□ 检查代理通信状态监控
□ 验证负载均衡策略效果
```

#### Step 4: 决策历史和分析
```
□ 访问决策历史记录
□ 验证历史决策列表显示
□ 点击查看具体决策详情
□ 检查决策推理过程记录
□ 验证决策结果和影响评估
□ 测试决策搜索和过滤功能
□ 验证决策统计分析功能
```

#### Step 5: 系统配置和优化
```
□ 访问监督者配置页面
□ 测试代理分配策略调整
□ 验证任务优先级规则配置
□ 测试性能阈值设置功能
□ 验证告警规则配置功能
□ 测试系统参数调优功能
```

### 🏆 监督者模式验收标准
- ✅ 任务提交和分配机制正常工作
- ✅ 代理监控和协调功能完整可用
- ✅ 决策记录和分析功能准确
- ✅ 系统配置和优化功能有效
- ✅ 异常检测和恢复机制可靠

---

## 🌊 清单 5: 工作流可视化验证

### 基础信息
- **模块名称**: 工作流可视化 (Workflow)
- **测试地址**: http://localhost:3000/workflows
- **对应后端**: /api/v1/workflows/
- **关键组件**: WorkflowVisualization, NodeStatus, WorkflowDebugPanel
- **验证时长**: 15-20分钟

### 🔍 详细验证步骤

#### Step 1: 可视化界面验证
```
□ 访问工作流可视化页面
□ 验证工作流图形正常渲染
□ 检查节点和连线显示正确
□ 验证布局算法效果合理
□ 测试图形缩放功能
□ 测试图形平移拖拽功能
□ 验证节点选择和高亮功能
```

#### Step 2: 工作流控制验证
```
□ 点击"启动工作流"按钮
□ 验证工作流开始执行
□ 观察节点状态动态更新
□ 测试"暂停工作流"功能
□ 验证暂停状态正确显示
□ 测试"恢复工作流"功能
□ 测试"停止工作流"功能
□ 测试"重置工作流"功能
```

#### Step 3: 状态可视化验证
```
□ 观察节点执行状态变化
□ 验证"等待"状态可视化
□ 验证"执行中"状态可视化
□ 验证"完成"状态可视化
□ 验证"错误"状态可视化
□ 检查数据流向动画效果
□ 验证执行时间统计显示
```

#### Step 4: 调试功能验证
```
□ 点击节点查看详细信息
□ 验证节点输入输出数据显示
□ 检查节点执行日志可查看
□ 测试断点设置功能(如有)
□ 验证变量监控功能(如有)
□ 测试步骤执行功能(如有)
□ 验证性能分析工具可用
```

### 🏆 工作流可视化验收标准
- ✅ 工作流图形渲染和交互正常
- ✅ 工作流控制功能完整可用
- ✅ 状态可视化准确及时
- ✅ 调试功能有效实用
- ✅ 用户体验流畅直观

---

## 📊 综合验收和报告模板

### 整体系统验收清单

```
□ 所有5个主要功能模块验证通过
□ 模块间导航和切换正常
□ 整体UI/UX风格一致
□ 响应式设计全面适配
□ 性能指标达到要求
□ 错误处理机制完善
□ 安全性基础要求满足
```

### Playwright MCP验证报告模板

```
验证日期: _______________
验证人员: _______________
系统版本: _______________
浏览器版本: _____________

=== 功能模块验证结果 ===

1. 单代理对话系统
   状态: □ 通过 □ 部分通过 □ 不通过
   发现问题数: ___个
   主要问题: ________________

2. 多代理协作系统  
   状态: □ 通过 □ 部分通过 □ 不通过
   发现问题数: ___个
   主要问题: ________________

3. RAG检索系统
   状态: □ 通过 □ 部分通过 □ 不通过
   发现问题数: ___个  
   主要问题: ________________

4. 监督者模式
   状态: □ 通过 □ 部分通过 □ 不通过
   发现问题数: ___个
   主要问题: ________________

5. 工作流可视化
   状态: □ 通过 □ 部分通过 □ 不通过
   发现问题数: ___个
   主要问题: ________________

=== 整体评估 ===

总体评分: ___/10分
通过率: ___%
关键问题数: ___个

推荐决策:
□ 可以发布上线
□ 需要修复后发布  
□ 需要重大修复
□ 暂不建议发布

下一步行动:
_________________________
```

### 问题追踪表模板

```
| 问题ID | 功能模块 | 严重程度 | 问题描述 | 发现时间 | 状态 | 负责人 |
|--------|----------|----------|----------|----------|------|--------|
| P001   |          |          |          |          |      |        |
| P002   |          |          |          |          |      |        |
| ...    |          |          |          |          |      |        |

严重程度定义:
- P0: 阻塞性问题，功能完全不可用
- P1: 严重问题，影响核心功能
- P2: 重要问题，影响用户体验
- P3: 一般问题，可延后修复

状态定义:
- Open: 新发现问题
- In Progress: 修复中
- Fixed: 已修复待验证
- Verified: 已验证关闭
- Closed: 问题已关闭
```

---

## 🚀 使用指南和最佳实践

### 验证前准备
1. 确保开发环境正常运行
2. 准备Playwright MCP工具
3. 清理浏览器缓存和数据
4. 准备测试数据和账号
5. 通知相关人员验证时间

### 验证执行原则
1. 按清单顺序逐项验证
2. 发现问题立即记录详情
3. 严重问题立即停止验证
4. 记录验证过程和结果
5. 及时反馈问题给开发团队

### 验证结果处理
1. 汇总所有验证结果
2. 分类问题严重程度
3. 制定修复优先级计划
4. 跟踪问题修复进度
5. 重新验证修复结果

---

*本检查清单将根据实际使用反馈持续完善和更新。*